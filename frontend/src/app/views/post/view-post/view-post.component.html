<section class="section-sm pb-0">
  <div class="container">
    <!-- Post Header -->
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="d-flex align-items-center mb-4">
          <img [src]="'http://localhost:2000/getImage/' + post?.userId?.image" alt="Thomas Macaulay" class="rounded-circle me-2" width="50" height="50">
          <div>
            <a [routerLink]="['/profil/view', post?.userId?._id ]" class="fw-bold text-dark d-block">{{ post?.userId?.firstName }} {{ post?.userId?.lastName }}</a>
            <div class="text-muted small">{{ post?.createdAt | date }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Post Image -->
    <div class="row justify-content-center" *ngIf="post?.image">
      <div class="col-lg-10 text-center">
        <img class="img-fluid rounded mb-4" [src]="'http://localhost:2000/getImage/' + post?.image" alt="Post Image">
      </div>
    </div>

    <!-- Post Content -->
    <div class="row justify-content-center"> 
      <div class="col-lg-10">
        <h3 class="fw-normal mb-3">{{ post?.title }}</h3>
        <p class="wrap-text">{{ post?.content }}</p>
      </div>
    </div>

    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="interaction-counts d-flex justify-content-between mb-2">
          <div>
            <i class="ti ti-thumb-up"></i>
            {{ likeCount }} likes
          </div>
          <div>
            <i class="ti ti-comment"></i>
            {{ commentCount }} comments
          </div>
        </div>
        <div class="d-flex justify-content-around pt-3 border-top">
          <button 
            class="btn" 
            (click)="toggleLike()" 
            [ngStyle]="{'color': liked ? 'blue' : 'black'}"
          >
            <i class="ti ti-thumb-up"></i> Like
          </button>
          <button class="btn btn-light text-muted"><i class="ti ti-comment"></i> Comment</button>
          <button class="btn btn-light text-muted"><i class="ti ti-share"></i> Share</button>
        </div>
      </div>
    </div>

    <!-- Comment Section -->
    <div class="row justify-content-center mt-4">
      <div class="col-lg-10">
       <!-- Comment Input -->
<div class="d-flex mb-3">
  <img  [src]="'http://localhost:2000/getImage/' + user?.image"  alt="User" class="rounded-circle me-2" width="40" height="40">
  <input
    type="text"
    class="form-control"
    placeholder="Write a comment..."
    [(ngModel)]="newCommentContent"
  />
  <button class="btn btn-primary ms-2" (click)="addComment()">Send</button>
</div>

        <!-- Dynamic Comments -->
        <div *ngFor="let comment of comments" class="d-flex mb-3">
          <img [src]="'http://localhost:2000/getImage/' + comment.userId.image" alt="User" class="rounded-circle me-2" width="40" height="40">
          <div>
            <p class="mb-1">
              <strong>{{ comment.userId.firstName }} {{ comment.userId.lastName }}</strong> {{ comment.content }}
            </p>
            <div class="text-muted small">{{ comment.createdAt | date }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>